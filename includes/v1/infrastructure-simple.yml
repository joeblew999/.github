version: '3'

# Simplified infrastructure include for testing

vars:
  GITHUB_ORG: joeblew999
  OS: "{{OS}}"
  ARCH: "{{ARCH}}"

tasks:
  # Secret management
  secrets:init:
    desc: "Initialize secret management"
    cmds:
      - echo "ğŸ” Initializing secrets for project..."
      - echo "âœ… Secret management ready"

  secrets:sync:
    desc: "Sync secrets to GitHub"
    cmds:
      - echo "ğŸ”„ Syncing secrets..."
      - echo "âœ… Secrets synced"

  secrets:test:
    desc: "Test secret access"
    cmds:
      - echo "ğŸ§ª Testing secret access..."
      - echo "âœ… Secrets working"

  # NATS operations
  nats:health:
    desc: "Check NATS health"
    cmds:
      - echo "ğŸ” Checking NATS..."
      - echo "âœ… NATS healthy"

  nats:bootstrap:
    desc: "Start NATS for development"
    cmds:
      - echo "ğŸš€ Starting NATS bootstrap..."
      - echo "âœ… NATS bootstrap ready"

  # Cloudflare integration
  cloudflare:test:
    desc: "Test Cloudflare access"
    cmds:
      - echo "ğŸ§ª Testing Cloudflare..."
      - echo "âœ… Cloudflare working"

  cloudflare:setup:
    desc: "Setup Cloudflare for project"
    cmds:
      - echo "ğŸ”§ Setting up Cloudflare..."
      - echo "âœ… Cloudflare configured"

  # Tool installation
  install:gh:
    desc: "Install GitHub CLI"
    cmds:
      - echo "ğŸ“¦ Installing GitHub CLI..."
      - echo "âœ… GitHub CLI ready"

  # Development setup
  dev:setup:
    desc: "Complete development setup"
    cmds:
      - echo "ğŸš€ Setting up development environment..."
      - task: secrets:init
      - task: install:gh
      - echo "âœ… Development setup complete"

  # Health checks
  health:check:
    desc: "Comprehensive health check"
    cmds:
      - echo "ğŸ¥ Infrastructure Health Check"
      - echo "=============================="
      - task: secrets:test
      - task: nats:health
      - task: cloudflare:test
      - echo "âœ… All systems healthy"

  # Organization status
  org:status:
    desc: "Organization-wide status"
    cmds:
      - echo "ğŸ¢ Organization Status: {{.GITHUB_ORG}}"
      - echo "ğŸŒ Platform: {{.OS}}/{{.ARCH}}"
      - echo "ğŸ“‚ Infrastructure platform available"
